#include "Include.h"

int main(void)
{
    setlocale(LC_ALL, "Russian");
    Init();
    {
        cout << "=====================================================================================" << endl;
        cout << "ËÅÊÑÈ×ÅÑÊÈÉ ÀÍÀËÈÇ" << endl;
        cout << "=====================================================================================" << endl << endl;

        while (lex->GetToken(token))
        {
            cout << "Ëåêñåìà: '" << token._value << "'\t"; PrintToken(token.GetType);
        }

        cout << "=====================================================================================" << endl;
        cout << "ËÅÊÑÈ×ÅÑÊÈÉ ÀÍÀËÈÇ ÇÀÂÅÐØ¨Í" << endl;
        cout << "=====================================================================================" << endl << endl;
        
        
        cout << "=====================================================================================" << endl;
        cout << "ÑÈÍÒÀÊÑÈ×ÅÑÊÈÉ ÀÍÀËÈÇ" << endl;
        cout << "=====================================================================================" << endl << endl;

        tree = syn->Syn(lex->getTokenList());

        cout << "=====================================================================================" << endl;
        cout << "ÑÈÍÒÀÊÑÈ×ÅÑÊÈÉ ÀÍÀËÈÇ ÇÀÂÅÐØ¨Í" << endl;
        cout << "=====================================================================================" << endl << endl;

        if (!tree->root->next.size())
        {
            return false;
        }

        cout << "=====================================ÂÛÂÎÄ ÄÅÐÅÂÀ====================================" << endl;
        tree->Trev();
        cout << "=====================================================================================" << endl;

        codeGen->generateCode(tree->root);

        cout << "=====================================================================================" << endl;
        cout << "ÇÀÏÈÑÜ ÏÐÎÃÐÀÌÌÛ ÍÀ ÂÛÕÎÄÍÎÌ ßÇÛÊÅ Â ÔÀÉË " << OutputFile << endl;
        cout << "=====================================================================================" << endl;

        codeGen->writeInFile(OutputFile);

        cout << "=====================================================================================" << endl;
        cout << "ÇÀÏÈÑÜ ÓÑÏÅØÍÎ ÇÀÂÅÐØÅÍÀ" << endl;
        cout << "=====================================================================================" << endl;

        cout << "=====================================================================================" << endl;
        cout << "ÏÐÎÃÐÀÌÌÀ ÓÑÏÅØÍÎ ÇÀÂÅÐØÅÍÀ" << endl;
        cout << "=====================================================================================" << endl;
    }
    return 0;
}